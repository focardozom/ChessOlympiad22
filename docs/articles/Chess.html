<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="ChessOlympiad22">
<title>Chess • ChessOlympiad22</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Chess">
<meta property="og:description" content="ChessOlympiad22">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">ChessOlympiad22</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Chess.html">Chess</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/focardozom/ChessOlympiad22/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Chess</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/focardozom/ChessOlympiad22/blob/HEAD/vignettes/Chess.Rmd" class="external-link"><code>vignettes/Chess.Rmd</code></a></small>
      <div class="d-none name"><code>Chess.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/focardozom/ChessOlympiad22" class="external-link">ChessOlympiad22</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="does-elo-predict-the-wining-move">Does ELO predict the wining move?<a class="anchor" aria-label="anchor" href="#does-elo-predict-the-wining-move"></a>
</h2>
<p>The ELO rating system is a method for calculating the relative skill
levels of chess players. The rating is based on the results of games
played, and is used to compare the strength of one player to another.
The higher a player’s ELO rating, the more skilled they are considered
to be.</p>
<p>In this document, the ELO difference between two players is used to
evaluate the probability of one player winning the match.</p>
<div class="section level4">
<h4 id="libraries">Libraries<a class="anchor" aria-label="anchor" href="#libraries"></a>
</h4>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://www.milbo.org/rpart-plot/index.html" class="external-link">rpart.plot</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: package 'rpart.plot' was built under R version 4.1.2</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidymodels.tidymodels.org" class="external-link">tidymodels</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: package 'broom' was built under R version 4.1.2</span></span>
<span><span class="co">#&gt; Warning: package 'scales' was built under R version 4.1.2</span></span>
<span><span class="co">#&gt; Warning: package 'dplyr' was built under R version 4.1.2</span></span>
<span><span class="co">#&gt; Warning: package 'ggplot2' was built under R version 4.1.2</span></span>
<span><span class="co">#&gt; Warning: package 'tibble' was built under R version 4.1.2</span></span>
<span><span class="co">#&gt; Warning: package 'tidyr' was built under R version 4.1.2</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="load-the-players-data">Load the players data<a class="anchor" aria-label="anchor" href="#load-the-players-data"></a>
</h4>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"players"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="distribution-of-elo">Distribution of ELO<a class="anchor" aria-label="anchor" href="#distribution-of-elo"></a>
</h4>
<p>First, let’s visualize the ELO distribution of the players.</p>
<p>It is important to filter out players with an ELO rating of zero from
the analysis, as these players have not yet been rated and do not have a
known skill level.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">players</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">rtg</span><span class="op">!=</span><span class="fl">0</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span><span class="va">rtg</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">geom_histogram</span><span class="op">(</span>bins <span class="op">=</span> <span class="fl">50</span>, fill<span class="op">=</span><span class="st">"gray20"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_x_continuous</span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">1000</span>,<span class="fl">2900</span>,<span class="fl">100</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu">theme_minimal</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">coord_flip</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme</span><span class="op">(</span>axis.text <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span><span class="st">""</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span>x<span class="op">=</span><span class="st">"Elo Rating System (player strength)"</span>,</span>
<span>       y<span class="op">=</span><span class="st">"Number of players"</span>,</span>
<span>       title <span class="op">=</span> <span class="st">"Elo Rating System of players in Chess Olympiad, 2022. </span></span>
<span><span class="st">       Chennai, India "</span>,</span>
<span>       caption <span class="op">=</span> <span class="st">"Magnus Carlsen has the highest Elo rating in the tournoment:2864"</span><span class="op">)</span></span></code></pre></div>
<p><img src="Chess_files/figure-html/plots-with-palyers-1.png" width="700"></p>
<p>It may be interesting to plot the ELO ratings of players by
federation, as the Chess Olympiad is played by national teams. By
examining the ELO ratings of players within each federation, we can get
a sense of the overall strength of the teams participating in the event.
This analysis could potentially provide insight into the results of the
Chess Olympiad and help predict the outcomes of matches.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">players</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">rtg</span><span class="op">&gt;</span><span class="fl">2600</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/reorder.factor.html" class="external-link">reorder</a></span><span class="op">(</span><span class="va">fed</span>, <span class="va">rtg</span><span class="op">)</span>,<span class="va">rtg</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">theme_minimal</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_boxplot</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">coord_flip</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span>x<span class="op">=</span><span class="st">""</span>, y<span class="op">=</span><span class="st">"ELO"</span><span class="op">)</span></span></code></pre></div>
<p><img src="Chess_files/figure-html/elo-by-federation-1.png" width="700"></p>
<p>The United States have the strongest team in the tournament.</p>
</div>
<div class="section level4">
<h4 id="load-results-data">Load results data<a class="anchor" aria-label="anchor" href="#load-results-data"></a>
</h4>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"results"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="differences-in-elo-by-round">Differences in ELO by round<a class="anchor" aria-label="anchor" href="#differences-in-elo-by-round"></a>
</h4>
<p>The Chess Olympiad was a Swiss-style tournament, which means that
players are paired against opponents with similar scores in each round.
In the first round, the highest-ranked player is matched against the
player in the middle of the ELO rating distribution. The second
highest-ranked player is then matched against the player just below the
player in the middle of the ELO rating distribution, and so on. This
implies that ELO differences are maximized in the first round. Then, the
pairings for each subsequent round are determined based on the results
of the previous rounds, with the goal of ensuring that players face
opponents with similar scores.</p>
<p>A visual representation of the differences in ELO by round are
presented in the following graph.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">results</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">elo_difference</span><span class="op">&gt;=</span><span class="op">-</span><span class="fl">1000</span>, </span>
<span>         <span class="va">elo_difference</span><span class="op">&lt;=</span><span class="fl">1000</span>, </span>
<span>         <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">elo_white</span><span class="op">)</span>, <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">elo_black</span><span class="op">)</span>, <span class="va">elo_white</span><span class="op">!=</span><span class="fl">0</span>,<span class="va">elo_black</span><span class="op">!=</span><span class="fl">0</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">elo_white</span><span class="op">)</span>,<span class="va">elo_difference</span>, </span>
<span>             fill<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">result_white</span><span class="op">)</span>, </span>
<span>             color<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">result_white</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">geom_point</span><span class="op">(</span>shape <span class="op">=</span> <span class="fl">21</span>, alpha<span class="op">=</span><span class="fl">0.85</span>,</span>
<span>             size <span class="op">=</span> <span class="fl">3</span>, stroke <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_minimal</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_fill_manual</span><span class="op">(</span>values<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Lost"</span><span class="op">=</span><span class="st">"black"</span>, <span class="st">"Draw"</span><span class="op">=</span><span class="st">"gray50"</span>,<span class="st">"Won"</span><span class="op">=</span><span class="st">"white"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_color_manual</span><span class="op">(</span>values<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Lost"</span><span class="op">=</span><span class="st">"black"</span>, <span class="st">"Draw"</span><span class="op">=</span><span class="st">"black"</span>,<span class="st">"Won"</span><span class="op">=</span><span class="st">"black"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span>fill<span class="op">=</span><span class="st">"Result"</span>, color<span class="op">=</span><span class="st">"Result"</span>, </span>
<span>       x<span class="op">=</span><span class="st">"Player Elo"</span>, </span>
<span>       y<span class="op">=</span><span class="st">"Elo difference"</span>,</span>
<span>       caption <span class="op">=</span> <span class="st">"Difference greater than zero indicates stronger player</span></span>
<span><span class="st">       44th Chess Olympiad. Chennai, 2022 Open"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">facet_wrap</span><span class="op">(</span><span class="op">~</span> <span class="va">round</span><span class="op">)</span></span></code></pre></div>
<p><img src="Chess_files/figure-html/plot-data-diff-1.png" width="700"></p>
</div>
</div>
<div class="section level2">
<h2 id="model-the-winning-chances-for-players-with-the-white-pieces-based-on-elo-difference-">Model the winning chances for players with the white pieces based on
ELO difference.<a class="anchor" aria-label="anchor" href="#model-the-winning-chances-for-players-with-the-white-pieces-based-on-elo-difference-"></a>
</h2>
<p>Now, we can identify the best split of the differences in ELO ratings
to classify the results of chess games. I will use
<code>tidymodels</code> to estimate a CART model.</p>
<div class="section level4">
<h4 id="set-the-engine">Set the engine<a class="anchor" aria-label="anchor" href="#set-the-engine"></a>
</h4>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cart_spec</span> <span class="op">&lt;-</span></span>
<span>   <span class="fu">decision_tree</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>   <span class="fu">set_engine</span><span class="op">(</span><span class="st">"rpart"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>   <span class="fu">set_mode</span><span class="op">(</span><span class="st">"classification"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="create-a-recepie">Create a recepie<a class="anchor" aria-label="anchor" href="#create-a-recepie"></a>
</h4>
<p>I will add two steps in the recipe. One to filter the data set by
round, and the other to convert results in a factor variable. I also
will limit my analysis to players with more than 1600 in ELO.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">results</span> <span class="op">&lt;-</span> <span class="va">results</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">elo_white</span><span class="op">)</span><span class="op">&gt;</span><span class="fl">1600</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">elo_black</span><span class="op">)</span><span class="op">&gt;</span><span class="fl">1600</span><span class="op">)</span> </span>
<span></span>
<span><span class="va">recipe</span> <span class="op">&lt;-</span> <span class="fu">recipe</span><span class="op">(</span></span>
<span>  <span class="va">result_white</span> <span class="op">~</span> <span class="va">elo_difference</span> <span class="op">+</span> <span class="va">round_number</span>, data <span class="op">=</span> <span class="va">results</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu">step_filter</span><span class="op">(</span><span class="va">round_number</span><span class="op">==</span><span class="va">round</span><span class="op">)</span></span>
<span>  </span></code></pre></div>
</div>
<div class="section level4">
<h4 id="create-a-workflow">Create a workflow<a class="anchor" aria-label="anchor" href="#create-a-workflow"></a>
</h4>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">wrkfl</span> <span class="op">&lt;-</span> <span class="fu">workflow</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">add_model</span><span class="op">(</span><span class="va">cart_spec</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">add_recipe</span><span class="op">(</span><span class="va">recipe</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="estimate-the-model">Estimate the model<a class="anchor" aria-label="anchor" href="#estimate-the-model"></a>
</h4>
<p>I will estimate the model for the round 1.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">round</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span></span>
<span><span class="va">cart_fit</span> <span class="op">&lt;-</span> <span class="va">wrkfl</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">fit</span><span class="op">(</span>data<span class="op">=</span><span class="va">results</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">extract_fit_parsnip</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="draw-an-tree-to-understand-the-results">Draw an tree to understand the results<a class="anchor" aria-label="anchor" href="#draw-an-tree-to-understand-the-results"></a>
</h4>
<p>Finally, I will create a tree showing the splits</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">cart_fit</span> <span class="op">&lt;-</span> <span class="fu">repair_call</span><span class="op">(</span><span class="va">cart_fit</span>, data <span class="op">=</span> <span class="va">round</span><span class="op">)</span></span>
<span></span>
<span><span class="va">cart_tree_fit</span> <span class="op">&lt;-</span> <span class="va">cart_fit</span><span class="op">$</span><span class="va">fit</span></span>
<span></span>
<span></span>
<span><span class="fu">rpart.plot</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/rpart.plot/man/rpart.plot.html" class="external-link">rpart.plot</a></span><span class="op">(</span><span class="va">cart_tree_fit</span>, roundint <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p><img src="Chess_files/figure-html/draw-tree-1.png" width="700"></p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/rpart.plot/man/rpart.rules.html" class="external-link">rpart.rules</a></span><span class="op">(</span><span class="va">cart_tree_fit</span>, cover <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Cannot retrieve the data used to build the model (so cannot determine roundint and is.binary for the variables).</span></span>
<span><span class="co">#&gt; To silence this warning:</span></span>
<span><span class="co">#&gt;     Call rpart.rules with roundint=FALSE,</span></span>
<span><span class="co">#&gt;     or rebuild the rpart model with model=TRUE.</span></span>
<span><span class="co">#&gt;   ..y  Dra Los Won                               cover</span></span>
<span><span class="co">#&gt;  Lost [.09 .91 .00] when elo_difference &lt;  -12     51%</span></span>
<span><span class="co">#&gt;   Won [.04 .01 .95] when elo_difference &gt;= -12     49%</span></span></code></pre></div>
<p>According to the model, a difference of 12 in the ELO is sufficient
to accurately predict the winner in 95% of cases and the loser in 91% of
cases.</p>
</div>
</div>
<div class="section level2">
<h2 id="model-the-last-round">Model the last round<a class="anchor" aria-label="anchor" href="#model-the-last-round"></a>
</h2>
<p>Let’s test the model for the final round, where the matches happened
between the strongest opponents.</p>
<p>I will add a the <code>tree_depth</code> parameter to my model. The
depth of the tree refers to the number of levels the tree has.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cart_spec</span> <span class="op">&lt;-</span></span>
<span>   <span class="fu">decision_tree</span><span class="op">(</span>tree_depth <span class="op">=</span> <span class="fl">4</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>   <span class="fu">set_engine</span><span class="op">(</span><span class="st">"rpart"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>   <span class="fu">set_mode</span><span class="op">(</span><span class="st">"classification"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">wrkfl</span> <span class="op">&lt;-</span> <span class="fu">workflow</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">add_model</span><span class="op">(</span><span class="va">cart_spec</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">add_recipe</span><span class="op">(</span><span class="va">recipe</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">round</span> <span class="op">&lt;-</span> <span class="fl">11</span></span>
<span></span>
<span><span class="va">cart_fit</span> <span class="op">&lt;-</span> <span class="va">wrkfl</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">fit</span><span class="op">(</span>data<span class="op">=</span><span class="va">results</span><span class="op">)</span></span>
<span></span>
<span><span class="va">cart_fit</span> <span class="op">&lt;-</span> <span class="va">wrkfl</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">fit</span><span class="op">(</span>data<span class="op">=</span><span class="va">results</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">extract_fit_parsnip</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">cart_fit</span> <span class="op">&lt;-</span> <span class="fu">repair_call</span><span class="op">(</span><span class="va">cart_fit</span>, data <span class="op">=</span> <span class="va">round</span><span class="op">)</span></span>
<span></span>
<span><span class="va">cart_tree_fit</span> <span class="op">&lt;-</span> <span class="va">cart_fit</span><span class="op">$</span><span class="va">fit</span></span>
<span></span>
<span><span class="fu">rpart.plot</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/rpart.plot/man/rpart.plot.html" class="external-link">rpart.plot</a></span><span class="op">(</span><span class="va">cart_tree_fit</span>, roundint <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p><img src="Chess_files/figure-html/round2-1.png" width="700"></p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/rpart.plot/man/rpart.rules.html" class="external-link">rpart.rules</a></span><span class="op">(</span><span class="va">cart_tree_fit</span>, cover <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Cannot retrieve the data used to build the model (so cannot determine roundint and is.binary for the variables).</span></span>
<span><span class="co">#&gt; To silence this warning:</span></span>
<span><span class="co">#&gt;     Call rpart.rules with roundint=FALSE,</span></span>
<span><span class="co">#&gt;     or rebuild the rpart model with model=TRUE.</span></span>
<span><span class="co">#&gt;   ..y  Dra Los Won                                       cover</span></span>
<span><span class="co">#&gt;  Draw [.45 .30 .25] when elo_difference is -176 to  85     51%</span></span>
<span><span class="co">#&gt;  Draw [.55 .09 .36] when elo_difference &gt;=         333      4%</span></span>
<span><span class="co">#&gt;  Draw [.69 .15 .15] when elo_difference is   95 to 115      4%</span></span>
<span><span class="co">#&gt;  Lost [.29 .61 .10] when elo_difference &lt;  -176            20%</span></span>
<span><span class="co">#&gt;   Won [.10 .30 .60] when elo_difference is   85 to  95      3%</span></span>
<span><span class="co">#&gt;   Won [.17 .20 .63] when elo_difference is  115 to 333     18%</span></span></code></pre></div>
<p>The colors of the leaves in the decision tree suggest that ELO
differences continue to be an important factor in the final round of the
chess tournament. The model appears to be more accurate at predicting
the outcomes of games with large ELO differences. For example, if you
have more than 333 points in ELO, the model predicts 63% wining chances
for you. However, if the ELO difference is less than 333 (but more than
115), the model predicts 55% of draw.</p>
<p>When the ELO difference is less than 115, the model’s predictions
become more interesting. If a player has 176 points less than their
opponent, the model is more likely to classify them as a loser (61%).
However, if the ELO difference is less than 85 points, the player still
has a good chance of winning the game. This could be seen as an
indicator of the performance of some players with lower ELO ratings who
are having a strong tournament. On the other hand, if the ELO difference
is greater than 85 points, most of the chances are for a draw.</p>
<p>This was a quick example of how to use ChessOlympiad package.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Francisco Cardozo.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
